buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'de.undercouch:gradle-download-task:3.4.3'
    }
}

apply plugin: 'de.undercouch.download'
apply plugin: 'java'

group 'com.irtimaled'
version project.buildVersion + '-' + project.mcVersion
archivesBaseName = 'BBOutlineReloaded'

sourceCompatibility = 1.8
targetCompatibility = 1.8

compileJava {
    dependsOn 'downloadServer'
}

repositories {
    mavenCentral()
}

dependencies {
    compile files('run/craftbukkit-1.13.2.jar')
}

sourceSets {
    main
}

jar {
    destinationDir = new File('run/plugins')
    classifier = 'bukkit'
}

artifacts {
    archives jar
}

task downloadServer(type: Download) {
    src 'https://cdn.getbukkit.org/craftbukkit/craftbukkit-1.13.2.jar'
    dest new File('run/craftbukkit-1.13.2.jar')
    overwrite false
}

task runServer(dependsOn: jar, type: JavaExec) {
    workingDir = new File('run');

    main = "-jar";
    args = [
            "craftbukkit-1.13.2.jar"
    ]
}
